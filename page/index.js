"use strict";(()=>{function g(r){if(r.length===1){switch(r){case" ":return"space";case",":return"comma";case"-":return"hyphen";case".":return"period"}if(r.match(/[A-Za-z]/))return r.toLowerCase()}}function G(r){let a=[];for(let e of r){let i=g(e);if(!i)return;a.push(i)}return a}var s=class{constructor(a,e,i,t,C){this.textarea=a;this.button=e;this.hiraganaChorder=i;this.katakanaChorder=t;this.keyLogger=C;this.mode="hiragana";a.addEventListener("keydown",this.handleKeyDown.bind(this)),a.addEventListener("keyup",this.handleKeyUp.bind(this)),a.addEventListener("compositionupdate",()=>{i.reset(),t.reset()}),a.addEventListener("keydown",j=>{(j.code==="ShiftLeft"||j.code==="ShiftRight")&&this.toggleMode()}),e.addEventListener("click",()=>this.toggleMode())}handleKeyDown(a){if(a.repeat)return;this.keyLogger.log({when:new Date,code:a.code,motion:"down"});let e=y(a);!e||(a.preventDefault(),this.hiraganaChorder.press(e),this.katakanaChorder.press(e))}handleKeyUp(a){if(a.repeat)return;this.keyLogger.log({when:new Date,code:a.code,motion:"up"});let e=y(a);if(!e)return;a.preventDefault();let i=this.hiraganaChorder.release(e),t=this.katakanaChorder.release(e);this.mode==="hiragana"&&i?this.insert(i):this.mode==="katakana"&&t&&this.insert(t)}insert(a){let e=this.textarea.selectionStart,i=this.textarea.selectionEnd;this.textarea.setRangeText(a,e,i);let t=e+a.length;this.textarea.setSelectionRange(t,t)}setMode(a){this.mode=a,this.button.innerHTML=p(a)}toggleMode(){this.mode==="hiragana"?this.setMode("katakana"):this.setMode("hiragana")}};function y(r){if(!(r.altKey||r.ctrlKey||r.metaKey||r.shiftKey||r.isComposing))return g(r.key)}function p(r){switch(r){case"hiragana":return"\u3042";case"katakana":return"\u30A2"}}var h=class{constructor(a,e,i){this.exportButton=a;this.keyLogger=e;this.appStartTime=i;a.addEventListener("click",this.handleExportButtonClick.bind(this))}handleExportButtonClick(){this.exportButton.href="data:text/csv;charset=UTF-8,"+encodeURIComponent(this.stringifyLogsAsCsv())}stringifyLogsAsCsv(){let a=`Milliseconds since page loaded,Keycode,Motion
`;for(let e of this.keyLogger.logs)a+=e.when.getTime()-this.appStartTime.getTime(),a+=",",a+=e.code,a+=",",a+=e.motion,a+=`
`;return a}};var n=class{constructor(a){this.keys=l(a)}equals(a){return this.keys.length!==a.keys.length?!1:this.keys.every(e=>a.keys.includes(e))}with(a){return new n([...this.keys,a])}};function l(r){let a=[];for(let e of r)a.includes(e)||a.push(e);return a}var m=class{constructor(a){this.map=a;this.keyStates=new Map}press(a){this.keyStates.set(a,"pressed")}release(a){if(this.keyStates.get(a)==="pressed"&&(this.keyStates.set(a,"released"),[...this.keyStates].every(([e,i])=>i==="released"))){let e=f(this.keyStates);return this.keyStates.clear(),this.map.map(e)}}reset(){this.keyStates.clear()}};function f(r){return new n([...r].map(([a])=>a))}var d=[{romajis:[" "],hiragana:" ",canGeminate:!1},{romajis:["-"],hiragana:"\u30FC",canGeminate:!1},{romajis:[","],hiragana:"\u3001",canGeminate:!1},{romajis:["."],hiragana:"\u3002",canGeminate:!1},{romajis:["a"],hiragana:"\u3042",canGeminate:!1},{romajis:["i"],hiragana:"\u3044",canGeminate:!1},{romajis:["u"],hiragana:"\u3046",canGeminate:!1},{romajis:["e"],hiragana:"\u3048",canGeminate:!1},{romajis:["o"],hiragana:"\u304A",canGeminate:!1},{romajis:["ka"],hiragana:"\u304B",canGeminate:!0},{romajis:["ki"],hiragana:"\u304D",canGeminate:!0},{romajis:["ku"],hiragana:"\u304F",canGeminate:!0},{romajis:["ke"],hiragana:"\u3051",canGeminate:!0},{romajis:["ko"],hiragana:"\u3053",canGeminate:!0},{romajis:["sa"],hiragana:"\u3055",canGeminate:!0},{romajis:["si","shi"],hiragana:"\u3057",canGeminate:!0},{romajis:["su"],hiragana:"\u3059",canGeminate:!0},{romajis:["se"],hiragana:"\u305B",canGeminate:!0},{romajis:["so"],hiragana:"\u305D",canGeminate:!0},{romajis:["ta"],hiragana:"\u305F",canGeminate:!0},{romajis:["ti","chi"],hiragana:"\u3061",canGeminate:!0},{romajis:["tu","tsu"],hiragana:"\u3064",canGeminate:!0},{romajis:["te"],hiragana:"\u3066",canGeminate:!0},{romajis:["to"],hiragana:"\u3068",canGeminate:!0},{romajis:["na"],hiragana:"\u306A",canGeminate:!0},{romajis:["ni"],hiragana:"\u306B",canGeminate:!0},{romajis:["nu"],hiragana:"\u306C",canGeminate:!0},{romajis:["ne"],hiragana:"\u306D",canGeminate:!0},{romajis:["no"],hiragana:"\u306E",canGeminate:!0},{romajis:["ha"],hiragana:"\u306F",canGeminate:!0},{romajis:["hi"],hiragana:"\u3072",canGeminate:!0},{romajis:["hu","fu"],hiragana:"\u3075",canGeminate:!0},{romajis:["he"],hiragana:"\u3078",canGeminate:!0},{romajis:["ho"],hiragana:"\u307B",canGeminate:!0},{romajis:["ma"],hiragana:"\u307E",canGeminate:!0},{romajis:["mi"],hiragana:"\u307F",canGeminate:!0},{romajis:["mu"],hiragana:"\u3080",canGeminate:!0},{romajis:["me"],hiragana:"\u3081",canGeminate:!0},{romajis:["mo"],hiragana:"\u3082",canGeminate:!0},{romajis:["ya"],hiragana:"\u3084",canGeminate:!0},{romajis:["yu"],hiragana:"\u3086",canGeminate:!0},{romajis:["yo"],hiragana:"\u3088",canGeminate:!0},{romajis:["ra"],hiragana:"\u3089",canGeminate:!0},{romajis:["ri"],hiragana:"\u308A",canGeminate:!0},{romajis:["ru"],hiragana:"\u308B",canGeminate:!0},{romajis:["re"],hiragana:"\u308C",canGeminate:!0},{romajis:["ro"],hiragana:"\u308D",canGeminate:!0},{romajis:["wa"],hiragana:"\u308F",canGeminate:!0},{romajis:["wo"],hiragana:"\u3092",canGeminate:!0},{romajis:["n"],hiragana:"\u3093",canGeminate:!1},{romajis:["ga"],hiragana:"\u304C",canGeminate:!0},{romajis:["gi"],hiragana:"\u304E",canGeminate:!0},{romajis:["gu"],hiragana:"\u3050",canGeminate:!0},{romajis:["ge"],hiragana:"\u3052",canGeminate:!0},{romajis:["go"],hiragana:"\u3054",canGeminate:!0},{romajis:["za"],hiragana:"\u3056",canGeminate:!0},{romajis:["zi","ji"],hiragana:"\u3058",canGeminate:!0},{romajis:["zu"],hiragana:"\u305A",canGeminate:!0},{romajis:["ze"],hiragana:"\u305C",canGeminate:!0},{romajis:["zo"],hiragana:"\u305E",canGeminate:!0},{romajis:["da"],hiragana:"\u3060",canGeminate:!0},{romajis:["di"],hiragana:"\u3062",canGeminate:!0},{romajis:["du"],hiragana:"\u3065",canGeminate:!0},{romajis:["de"],hiragana:"\u3067",canGeminate:!0},{romajis:["do"],hiragana:"\u3069",canGeminate:!0},{romajis:["ba"],hiragana:"\u3070",canGeminate:!0},{romajis:["bi"],hiragana:"\u3073",canGeminate:!0},{romajis:["bu"],hiragana:"\u3076",canGeminate:!0},{romajis:["be"],hiragana:"\u3079",canGeminate:!0},{romajis:["bo"],hiragana:"\u307C",canGeminate:!0},{romajis:["pa"],hiragana:"\u3071",canGeminate:!0},{romajis:["pi"],hiragana:"\u3074",canGeminate:!0},{romajis:["pu"],hiragana:"\u3077",canGeminate:!0},{romajis:["pe"],hiragana:"\u307A",canGeminate:!0},{romajis:["po"],hiragana:"\u307D",canGeminate:!0},{romajis:["la","xa"],hiragana:"\u3041",canGeminate:!0},{romajis:["li","xi"],hiragana:"\u3043",canGeminate:!0},{romajis:["lu","xu"],hiragana:"\u3045",canGeminate:!0},{romajis:["le","lye","xe","xye"],hiragana:"\u3047",canGeminate:!0},{romajis:["lo","xo"],hiragana:"\u3049",canGeminate:!0},{romajis:["ltu","ltsu","xtu","xtsu"],hiragana:"\u3063",canGeminate:!0},{romajis:["lya","xya"],hiragana:"\u3083",canGeminate:!0},{romajis:["lyu","xyu"],hiragana:"\u3085",canGeminate:!0},{romajis:["lyo","xyo"],hiragana:"\u3087",canGeminate:!0},{romajis:["lwa","xwa"],hiragana:"\u308E",canGeminate:!0},{romajis:["ye"],hiragana:"\u3044\u3047",canGeminate:!0},{romajis:["wha"],hiragana:"\u3046\u3041",canGeminate:!0},{romajis:["whi","wi"],hiragana:"\u3046\u3043",canGeminate:!0},{romajis:["whe","we"],hiragana:"\u3046\u3047",canGeminate:!0},{romajis:["who"],hiragana:"\u3046\u3049",canGeminate:!0},{romajis:["wyi"],hiragana:"\u3090",canGeminate:!0},{romajis:["wye"],hiragana:"\u3091",canGeminate:!0},{romajis:["va"],hiragana:"\u3094\u3041",canGeminate:!0},{romajis:["vi"],hiragana:"\u3094\u3043",canGeminate:!0},{romajis:["vu"],hiragana:"\u3094",canGeminate:!0},{romajis:["ve"],hiragana:"\u3094\u3047",canGeminate:!0},{romajis:["vo"],hiragana:"\u3094\u3049",canGeminate:!0},{romajis:["vya"],hiragana:"\u3094\u3083",canGeminate:!0},{romajis:["vyu"],hiragana:"\u3094\u3085",canGeminate:!0},{romajis:["vyo"],hiragana:"\u3094\u3087",canGeminate:!0},{romajis:["kya"],hiragana:"\u304D\u3083",canGeminate:!0},{romajis:["kyi"],hiragana:"\u304D\u3043",canGeminate:!0},{romajis:["kyu"],hiragana:"\u304D\u3085",canGeminate:!0},{romajis:["kye"],hiragana:"\u304D\u3047",canGeminate:!0},{romajis:["kyo"],hiragana:"\u304D\u3087",canGeminate:!0},{romajis:["sya","sha"],hiragana:"\u3057\u3083",canGeminate:!0},{romajis:["syi"],hiragana:"\u3057\u3043",canGeminate:!0},{romajis:["syu","shu"],hiragana:"\u3057\u3085",canGeminate:!0},{romajis:["sye","she"],hiragana:"\u3057\u3047",canGeminate:!0},{romajis:["syo","sho"],hiragana:"\u3057\u3087",canGeminate:!0},{romajis:["swa"],hiragana:"\u3059\u3041",canGeminate:!0},{romajis:["swi"],hiragana:"\u3059\u3043",canGeminate:!0},{romajis:["swu"],hiragana:"\u3059\u3045",canGeminate:!0},{romajis:["swe"],hiragana:"\u3059\u3047",canGeminate:!0},{romajis:["swo"],hiragana:"\u3059\u3049",canGeminate:!0},{romajis:["tya","cha","cya"],hiragana:"\u3061\u3083",canGeminate:!0},{romajis:["tyi","cyi"],hiragana:"\u3061\u3043",canGeminate:!0},{romajis:["tyu","chu","cyu"],hiragana:"\u3061\u3085",canGeminate:!0},{romajis:["tye","che","cye"],hiragana:"\u3061\u3047",canGeminate:!0},{romajis:["tyo","cho","cyo"],hiragana:"\u3061\u3087",canGeminate:!0},{romajis:["tsa"],hiragana:"\u3064\u3041",canGeminate:!0},{romajis:["tsi"],hiragana:"\u3064\u3043",canGeminate:!0},{romajis:["tse"],hiragana:"\u3064\u3047",canGeminate:!0},{romajis:["tso"],hiragana:"\u3064\u3049",canGeminate:!0},{romajis:["tha"],hiragana:"\u3066\u3083",canGeminate:!0},{romajis:["thi"],hiragana:"\u3066\u3043",canGeminate:!0},{romajis:["thu"],hiragana:"\u3066\u3085",canGeminate:!0},{romajis:["the"],hiragana:"\u3066\u3047",canGeminate:!0},{romajis:["tho"],hiragana:"\u3066\u3087",canGeminate:!0},{romajis:["twa"],hiragana:"\u3068\u3041",canGeminate:!0},{romajis:["twi"],hiragana:"\u3068\u3043",canGeminate:!0},{romajis:["twu"],hiragana:"\u3068\u3045",canGeminate:!0},{romajis:["twe"],hiragana:"\u3068\u3047",canGeminate:!0},{romajis:["two"],hiragana:"\u3068\u3049",canGeminate:!0},{romajis:["nya"],hiragana:"\u306B\u3083",canGeminate:!0},{romajis:["nyi"],hiragana:"\u306B\u3043",canGeminate:!0},{romajis:["nyu"],hiragana:"\u306B\u3085",canGeminate:!0},{romajis:["nye"],hiragana:"\u306B\u3047",canGeminate:!0},{romajis:["nyo"],hiragana:"\u306B\u3087",canGeminate:!0},{romajis:["hya"],hiragana:"\u3072\u3083",canGeminate:!0},{romajis:["hyi"],hiragana:"\u3072\u3043",canGeminate:!0},{romajis:["hyu"],hiragana:"\u3072\u3085",canGeminate:!0},{romajis:["hye"],hiragana:"\u3072\u3047",canGeminate:!0},{romajis:["hyo"],hiragana:"\u3072\u3087",canGeminate:!0},{romajis:["fwa","fa","hwa"],hiragana:"\u3075\u3041",canGeminate:!0},{romajis:["fwi","fi","hwi"],hiragana:"\u3075\u3043",canGeminate:!0},{romajis:["fwu"],hiragana:"\u3075\u3045",canGeminate:!0},{romajis:["fwe","fe","hwe"],hiragana:"\u3075\u3047",canGeminate:!0},{romajis:["fwo","fo","hwo"],hiragana:"\u3075\u3049",canGeminate:!0},{romajis:["fya"],hiragana:"\u3075\u3083",canGeminate:!0},{romajis:["fyu"],hiragana:"\u3075\u3085",canGeminate:!0},{romajis:["fyo"],hiragana:"\u3075\u3087",canGeminate:!0},{romajis:["mya"],hiragana:"\u307F\u3083",canGeminate:!0},{romajis:["myi"],hiragana:"\u307F\u3043",canGeminate:!0},{romajis:["myu"],hiragana:"\u307F\u3085",canGeminate:!0},{romajis:["mye"],hiragana:"\u307F\u3047",canGeminate:!0},{romajis:["myo"],hiragana:"\u307F\u3087",canGeminate:!0},{romajis:["rya"],hiragana:"\u308A\u3083",canGeminate:!0},{romajis:["ryi"],hiragana:"\u308A\u3043",canGeminate:!0},{romajis:["ryu"],hiragana:"\u308A\u3085",canGeminate:!0},{romajis:["rye"],hiragana:"\u308A\u3047",canGeminate:!0},{romajis:["ryo"],hiragana:"\u308A\u3087",canGeminate:!0},{romajis:["gya"],hiragana:"\u304E\u3083",canGeminate:!0},{romajis:["gyi"],hiragana:"\u304E\u3043",canGeminate:!0},{romajis:["gyu"],hiragana:"\u304E\u3085",canGeminate:!0},{romajis:["gye"],hiragana:"\u304E\u3047",canGeminate:!0},{romajis:["gyo"],hiragana:"\u304E\u3087",canGeminate:!0},{romajis:["kwa","qa"],hiragana:"\u304F\u3041",canGeminate:!0},{romajis:["kwi","qi","qwi","qyi"],hiragana:"\u304F\u3043",canGeminate:!0},{romajis:["kwu","qu","qwu"],hiragana:"\u304F\u3045",canGeminate:!0},{romajis:["kwe","qe","qwe","qye"],hiragana:"\u304F\u3047",canGeminate:!0},{romajis:["kwo","qo","qwo"],hiragana:"\u304F\u3049",canGeminate:!0},{romajis:["qwa"],hiragana:"\u304F\u308E",canGeminate:!0},{romajis:["qya"],hiragana:"\u304F\u3083",canGeminate:!0},{romajis:["qyu"],hiragana:"\u304F\u3085",canGeminate:!0},{romajis:["qyo"],hiragana:"\u304F\u3087",canGeminate:!0},{romajis:["gwa"],hiragana:"\u3050\u3041",canGeminate:!0},{romajis:["gwi"],hiragana:"\u3050\u3043",canGeminate:!0},{romajis:["gwu"],hiragana:"\u3050\u3045",canGeminate:!0},{romajis:["gwe"],hiragana:"\u3050\u3047",canGeminate:!0},{romajis:["gwo"],hiragana:"\u3050\u3049",canGeminate:!0},{romajis:["zya","jya","ja"],hiragana:"\u3058\u3083",canGeminate:!0},{romajis:["zyi","jyi"],hiragana:"\u3058\u3043",canGeminate:!0},{romajis:["zyu","jyu","ju"],hiragana:"\u3058\u3085",canGeminate:!0},{romajis:["zye","jye","je"],hiragana:"\u3058\u3047",canGeminate:!0},{romajis:["zyo","jyo","jo"],hiragana:"\u3058\u3087",canGeminate:!0},{romajis:["dya"],hiragana:"\u3062\u3083",canGeminate:!0},{romajis:["dyi"],hiragana:"\u3062\u3043",canGeminate:!0},{romajis:["dyu"],hiragana:"\u3062\u3085",canGeminate:!0},{romajis:["dye"],hiragana:"\u3062\u3047",canGeminate:!0},{romajis:["dyo"],hiragana:"\u3062\u3087",canGeminate:!0},{romajis:["dha"],hiragana:"\u3067\u3083",canGeminate:!0},{romajis:["dhi"],hiragana:"\u3067\u3043",canGeminate:!0},{romajis:["dhu"],hiragana:"\u3067\u3085",canGeminate:!0},{romajis:["dhe"],hiragana:"\u3067\u3047",canGeminate:!0},{romajis:["dho"],hiragana:"\u3067\u3087",canGeminate:!0},{romajis:["dwa"],hiragana:"\u3069\u3041",canGeminate:!0},{romajis:["dwi"],hiragana:"\u3069\u3043",canGeminate:!0},{romajis:["dwu"],hiragana:"\u3069\u3045",canGeminate:!0},{romajis:["dwe"],hiragana:"\u3069\u3047",canGeminate:!0},{romajis:["dwo"],hiragana:"\u3069\u3049",canGeminate:!0},{romajis:["bya"],hiragana:"\u3073\u3083",canGeminate:!0},{romajis:["byi"],hiragana:"\u3073\u3043",canGeminate:!0},{romajis:["byu"],hiragana:"\u3073\u3085",canGeminate:!0},{romajis:["bye"],hiragana:"\u3073\u3047",canGeminate:!0},{romajis:["byo"],hiragana:"\u3073\u3087",canGeminate:!0},{romajis:["pya"],hiragana:"\u3074\u3083",canGeminate:!0},{romajis:["pyi"],hiragana:"\u3074\u3043",canGeminate:!0},{romajis:["pyu"],hiragana:"\u3074\u3085",canGeminate:!0},{romajis:["pye"],hiragana:"\u3074\u3047",canGeminate:!0},{romajis:["pyo"],hiragana:"\u3074\u3087",canGeminate:!0}];var k=d.flatMap(({romajis:r,hiragana:a,canGeminate:e})=>r.map(i=>G(i)).filter(i=>!!i).map(i=>new n(i)).flatMap(i=>e?[{chord:i,hiragana:a},{chord:i.with("space"),hiragana:"\u3063"+a}]:[{chord:i,hiragana:a}])),o=class{map(a){let e=K(a);return e?e.hiragana:""}};function K(r){return k.find(a=>a.chord.equals(r))}var v=new o,c=class{map(a){return x(v.map(a))}};function x(r){return[...r].map(a=>{var i;let e=(i=a.codePointAt(0))!=null?i:0;return 12353<=e&&e<=12438?e+96:e}).map(a=>String.fromCodePoint(a)).join("")}var u=class{constructor(){this.logs=[]}log(a){this.logs.push(a)}};function M(){let r=document.querySelector("#editor"),a=document.querySelector("#mode"),e=document.querySelector("#export");if(!(r instanceof HTMLTextAreaElement&&a instanceof HTMLButtonElement&&e instanceof HTMLAnchorElement))return;let i=new u;new s(r,a,new m(new o),new m(new c),i),new h(e,i,new Date)}M();})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2RvbWFpbi9rZXkvS2V5LnRzIiwgIi4uL3NyYy9jb250cm9sbGVyL0VkaXRvci50cyIsICIuLi9zcmMvY29udHJvbGxlci9Mb2dFeHBvcnRlci50cyIsICIuLi9zcmMvZG9tYWluL2Nob3JkL0Nob3JkLnRzIiwgIi4uL3NyYy9kb21haW4vY2hvcmQvQ2hvcmRlci50cyIsICIuLi9zcmMvZG9tYWluL2Nob3JkL0hpcmFnYW5hQ2hvcmRNYXAudHMiLCAiLi4vc3JjL2RvbWFpbi9jaG9yZC9LYXRha2FuYUNob3JkTWFwLnRzIiwgIi4uL3NyYy9kb21haW4va2V5L0tleUxvZ2dlci50cyIsICIuLi9zcmMvaW5kZXgudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImV4cG9ydCB0eXBlIEtleSA9XG4gIHwgXCJzcGFjZVwiXG4gIHwgXCJjb21tYVwiXG4gIHwgXCJoeXBoZW5cIlxuICB8IFwicGVyaW9kXCJcbiAgfCBcImFcIlxuICB8IFwiYlwiXG4gIHwgXCJjXCJcbiAgfCBcImRcIlxuICB8IFwiZVwiXG4gIHwgXCJmXCJcbiAgfCBcImdcIlxuICB8IFwiaFwiXG4gIHwgXCJpXCJcbiAgfCBcImpcIlxuICB8IFwia1wiXG4gIHwgXCJsXCJcbiAgfCBcIm1cIlxuICB8IFwiblwiXG4gIHwgXCJvXCJcbiAgfCBcInBcIlxuICB8IFwicVwiXG4gIHwgXCJyXCJcbiAgfCBcInNcIlxuICB8IFwidFwiXG4gIHwgXCJ1XCJcbiAgfCBcInZcIlxuICB8IFwid1wiXG4gIHwgXCJ4XCJcbiAgfCBcInlcIlxuICB8IFwielwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY29udmVydENoYXJUb0tleShjaGFyOiBzdHJpbmcpOiBLZXkgfCB1bmRlZmluZWQge1xuICBpZiAoY2hhci5sZW5ndGggIT09IDEpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKGNoYXIpIHtcbiAgICBjYXNlIFwiIFwiOlxuICAgICAgcmV0dXJuIFwic3BhY2VcIjtcbiAgICBjYXNlIFwiLFwiOlxuICAgICAgcmV0dXJuIFwiY29tbWFcIjtcbiAgICBjYXNlIFwiLVwiOlxuICAgICAgcmV0dXJuIFwiaHlwaGVuXCI7XG4gICAgY2FzZSBcIi5cIjpcbiAgICAgIHJldHVybiBcInBlcmlvZFwiO1xuICB9XG5cbiAgaWYgKGNoYXIubWF0Y2goL1tBLVphLXpdLykpIHtcbiAgICByZXR1cm4gY2hhci50b0xvd2VyQ2FzZSgpIGFzIEtleTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFN0cmluZ1RvS2V5cyhzdHJpbmc6IHN0cmluZykge1xuICBjb25zdCBrZXlzOiBLZXlbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgY2hhciBvZiBzdHJpbmcpIHtcbiAgICBjb25zdCBrZXkgPSBjb252ZXJ0Q2hhclRvS2V5KGNoYXIpO1xuICAgIGlmICgha2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGtleXMucHVzaChrZXkpO1xuICB9XG5cbiAgcmV0dXJuIGtleXM7XG59XG4iLCAiaW1wb3J0IHsgQ2hvcmRlciB9IGZyb20gXCIuLi9kb21haW4vY2hvcmQvQ2hvcmRlclwiO1xuaW1wb3J0IHsgY29udmVydENoYXJUb0tleSB9IGZyb20gXCIuLi9kb21haW4va2V5L0tleVwiO1xuaW1wb3J0IHsgS2V5TG9nZ2VyIH0gZnJvbSBcIi4uL2RvbWFpbi9rZXkvS2V5TG9nZ2VyXCI7XG5cbnR5cGUgTW9kZSA9IFwiaGlyYWdhbmFcIiB8IFwia2F0YWthbmFcIjtcblxuZXhwb3J0IGNsYXNzIEVkaXRvciB7XG4gIHByaXZhdGUgbW9kZTogTW9kZSA9IFwiaGlyYWdhbmFcIjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IHRleHRhcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGhpcmFnYW5hQ2hvcmRlcjogQ2hvcmRlcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IGthdGFrYW5hQ2hvcmRlcjogQ2hvcmRlcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IGtleUxvZ2dlcjogS2V5TG9nZ2VyXG4gICkge1xuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpKTtcbiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5oYW5kbGVLZXlVcC5iaW5kKHRoaXMpKTtcbiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKFwiY29tcG9zaXRpb251cGRhdGVcIiwgKCkgPT4ge1xuICAgICAgaGlyYWdhbmFDaG9yZGVyLnJlc2V0KCk7XG4gICAgICBrYXRha2FuYUNob3JkZXIucmVzZXQoKTtcbiAgICB9KTtcblxuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS5jb2RlID09PSBcIlNoaWZ0TGVmdFwiIHx8IGUuY29kZSA9PT0gXCJTaGlmdFJpZ2h0XCIpIHtcbiAgICAgICAgdGhpcy50b2dnbGVNb2RlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnRvZ2dsZU1vZGUoKSk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoZXZlbnQucmVwZWF0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5rZXlMb2dnZXIubG9nKHtcbiAgICAgIHdoZW46IG5ldyBEYXRlKCksXG4gICAgICBjb2RlOiBldmVudC5jb2RlLFxuICAgICAgbW90aW9uOiBcImRvd25cIixcbiAgICB9KTtcblxuICAgIGNvbnN0IGtleSA9IGNvbnZlcnRLZXlib2FyZEV2ZW50VG9LZXkoZXZlbnQpO1xuICAgIGlmICgha2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHRoaXMuaGlyYWdhbmFDaG9yZGVyLnByZXNzKGtleSk7XG4gICAgdGhpcy5rYXRha2FuYUNob3JkZXIucHJlc3Moa2V5KTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoZXZlbnQucmVwZWF0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5rZXlMb2dnZXIubG9nKHtcbiAgICAgIHdoZW46IG5ldyBEYXRlKCksXG4gICAgICBjb2RlOiBldmVudC5jb2RlLFxuICAgICAgbW90aW9uOiBcInVwXCIsXG4gICAgfSk7XG5cbiAgICBjb25zdCBrZXkgPSBjb252ZXJ0S2V5Ym9hcmRFdmVudFRvS2V5KGV2ZW50KTtcbiAgICBpZiAoIWtleSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCBoaXJhZ2FuYSA9IHRoaXMuaGlyYWdhbmFDaG9yZGVyLnJlbGVhc2Uoa2V5KTtcbiAgICBjb25zdCBrYXRha2FuYSA9IHRoaXMua2F0YWthbmFDaG9yZGVyLnJlbGVhc2Uoa2V5KTtcblxuICAgIGlmICh0aGlzLm1vZGUgPT09IFwiaGlyYWdhbmFcIiAmJiBoaXJhZ2FuYSkge1xuICAgICAgdGhpcy5pbnNlcnQoaGlyYWdhbmEpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSBcImthdGFrYW5hXCIgJiYga2F0YWthbmEpIHtcbiAgICAgIHRoaXMuaW5zZXJ0KGthdGFrYW5hKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGluc2VydCh0ZXh0OiBzdHJpbmcpIHtcbiAgICBjb25zdCBzZWxlY3Rpb25TdGFydCA9IHRoaXMudGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQ7XG4gICAgY29uc3Qgc2VsZWN0aW9uRW5kID0gdGhpcy50ZXh0YXJlYS5zZWxlY3Rpb25FbmQ7XG4gICAgdGhpcy50ZXh0YXJlYS5zZXRSYW5nZVRleHQodGV4dCwgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCk7XG5cbiAgICBjb25zdCBzZWxlY3Rpb25Qb3NpdGlvbiA9IHNlbGVjdGlvblN0YXJ0ICsgdGV4dC5sZW5ndGg7XG4gICAgdGhpcy50ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25Qb3NpdGlvbiwgc2VsZWN0aW9uUG9zaXRpb24pO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRNb2RlKG1vZGU6IE1vZGUpIHtcbiAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9IGNvbnZlcnRNb2RlVG9TeW1ib2wobW9kZSk7XG4gIH1cblxuICBwcml2YXRlIHRvZ2dsZU1vZGUoKSB7XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gXCJoaXJhZ2FuYVwiKSB7XG4gICAgICB0aGlzLnNldE1vZGUoXCJrYXRha2FuYVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRNb2RlKFwiaGlyYWdhbmFcIik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRLZXlib2FyZEV2ZW50VG9LZXkoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgaWYgKFxuICAgIGV2ZW50LmFsdEtleSB8fFxuICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgZXZlbnQuc2hpZnRLZXkgfHxcbiAgICBldmVudC5pc0NvbXBvc2luZ1xuICApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBGSVhNRTogZG8gbm90IHJlbHkgb24gZXZlbnQua2V5XG4gIHJldHVybiBjb252ZXJ0Q2hhclRvS2V5KGV2ZW50LmtleSk7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRNb2RlVG9TeW1ib2wobW9kZTogTW9kZSkge1xuICBzd2l0Y2ggKG1vZGUpIHtcbiAgICBjYXNlIFwiaGlyYWdhbmFcIjpcbiAgICAgIHJldHVybiBcIlx1MzA0MlwiO1xuICAgIGNhc2UgXCJrYXRha2FuYVwiOlxuICAgICAgcmV0dXJuIFwiXHUzMEEyXCI7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBLZXlMb2dnZXIgfSBmcm9tIFwiLi4vZG9tYWluL2tleS9LZXlMb2dnZXJcIjtcblxuZXhwb3J0IGNsYXNzIExvZ0V4cG9ydGVyIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBleHBvcnRCdXR0b246IEhUTUxBbmNob3JFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkga2V5TG9nZ2VyOiBLZXlMb2dnZXIsXG4gICAgcHJpdmF0ZSByZWFkb25seSBhcHBTdGFydFRpbWU6IERhdGVcbiAgKSB7XG4gICAgZXhwb3J0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsaWNrXCIsXG4gICAgICB0aGlzLmhhbmRsZUV4cG9ydEJ1dHRvbkNsaWNrLmJpbmQodGhpcylcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVFeHBvcnRCdXR0b25DbGljaygpIHtcbiAgICB0aGlzLmV4cG9ydEJ1dHRvbi5ocmVmID1cbiAgICAgIFwiZGF0YTp0ZXh0L2NzdjtjaGFyc2V0PVVURi04LFwiICtcbiAgICAgIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLnN0cmluZ2lmeUxvZ3NBc0NzdigpKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RyaW5naWZ5TG9nc0FzQ3N2KCkge1xuICAgIGxldCBzdHIgPSBcIk1pbGxpc2Vjb25kcyBzaW5jZSBwYWdlIGxvYWRlZCxLZXljb2RlLE1vdGlvblxcblwiO1xuICAgIGZvciAoY29uc3QgbG9nIG9mIHRoaXMua2V5TG9nZ2VyLmxvZ3MpIHtcbiAgICAgIHN0ciArPSBsb2cud2hlbi5nZXRUaW1lKCkgLSB0aGlzLmFwcFN0YXJ0VGltZS5nZXRUaW1lKCk7XG4gICAgICBzdHIgKz0gXCIsXCI7XG4gICAgICBzdHIgKz0gbG9nLmNvZGU7XG4gICAgICBzdHIgKz0gXCIsXCI7XG4gICAgICBzdHIgKz0gbG9nLm1vdGlvbjtcbiAgICAgIHN0ciArPSBcIlxcblwiO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgS2V5IH0gZnJvbSBcIi4uL2tleS9LZXlcIjtcblxuZXhwb3J0IGNsYXNzIENob3JkIHtcbiAgcHJpdmF0ZSByZWFkb25seSBrZXlzOiBLZXlbXTtcblxuICBjb25zdHJ1Y3RvcihrZXlzOiBLZXlbXSkge1xuICAgIHRoaXMua2V5cyA9IGRlZHVwZShrZXlzKTtcbiAgfVxuXG4gIGVxdWFscyhjaG9yZDogQ2hvcmQpIHtcbiAgICBpZiAodGhpcy5rZXlzLmxlbmd0aCAhPT0gY2hvcmQua2V5cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5rZXlzLmV2ZXJ5KChrZXkpID0+IGNob3JkLmtleXMuaW5jbHVkZXMoa2V5KSk7XG4gIH1cblxuICB3aXRoKGtleTogS2V5KSB7XG4gICAgcmV0dXJuIG5ldyBDaG9yZChbLi4udGhpcy5rZXlzLCBrZXldKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkZWR1cGUoa2V5czogS2V5W10pIHtcbiAgY29uc3QgcmVzdWx0OiBLZXlbXSA9IFtdO1xuXG4gIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICBpZiAoIXJlc3VsdC5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCAiaW1wb3J0IHsgS2V5IH0gZnJvbSBcIi4uL2tleS9LZXlcIjtcbmltcG9ydCB7IENob3JkIH0gZnJvbSBcIi4vQ2hvcmRcIjtcbmltcG9ydCB7IENob3JkTWFwIH0gZnJvbSBcIi4vQ2hvcmRNYXBcIjtcblxudHlwZSBLZXlTdGF0ZSA9IFwicHJlc3NlZFwiIHwgXCJyZWxlYXNlZFwiO1xuXG5leHBvcnQgY2xhc3MgQ2hvcmRlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkga2V5U3RhdGVzID0gbmV3IE1hcDxLZXksIEtleVN0YXRlPigpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgbWFwOiBDaG9yZE1hcCkge31cblxuICBwcmVzcyhrZXk6IEtleSkge1xuICAgIHRoaXMua2V5U3RhdGVzLnNldChrZXksIFwicHJlc3NlZFwiKTtcbiAgfVxuXG4gIHJlbGVhc2Uoa2V5OiBLZXkpIHtcbiAgICAvLyBUT0RPOiBpdCdzIGEgYml0IGF3a3dhcmQgdG8gbWFuYWdlIHRoZSBzdGF0ZXMgb2YgdGhlIGtleXMgaGVyZVxuICAgIGlmICh0aGlzLmtleVN0YXRlcy5nZXQoa2V5KSAhPT0gXCJwcmVzc2VkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmtleVN0YXRlcy5zZXQoa2V5LCBcInJlbGVhc2VkXCIpO1xuXG4gICAgaWYgKFsuLi50aGlzLmtleVN0YXRlc10uZXZlcnkoKFtfLCBzdGF0ZV0pID0+IHN0YXRlID09PSBcInJlbGVhc2VkXCIpKSB7XG4gICAgICBjb25zdCBjaG9yZCA9IGNvbnZlcnRLZXlTdGF0ZXNUb0Nob3JkKHRoaXMua2V5U3RhdGVzKTtcbiAgICAgIHRoaXMua2V5U3RhdGVzLmNsZWFyKCk7XG4gICAgICByZXR1cm4gdGhpcy5tYXAubWFwKGNob3JkKTtcbiAgICB9XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLmtleVN0YXRlcy5jbGVhcigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRLZXlTdGF0ZXNUb0Nob3JkKGtleVN0YXRlczogTWFwPEtleSwgS2V5U3RhdGU+KSB7XG4gIHJldHVybiBuZXcgQ2hvcmQoWy4uLmtleVN0YXRlc10ubWFwKChba2V5XSkgPT4ga2V5KSk7XG59XG4iLCAiaW1wb3J0IHsgY29udmVydFN0cmluZ1RvS2V5cywgS2V5IH0gZnJvbSBcIi4uL2tleS9LZXlcIjtcbmltcG9ydCB7IENob3JkIH0gZnJvbSBcIi4vQ2hvcmRcIjtcbmltcG9ydCB7IENob3JkTWFwIH0gZnJvbSBcIi4vQ2hvcmRNYXBcIjtcbmltcG9ydCBjb252ZXJzaW9ucyBmcm9tIFwiLi9IaXJhZ2FuYUNob3JkTWFwLmpzb25cIjtcblxuY29uc3QgbWFwcGluZ3MgPSBjb252ZXJzaW9ucy5mbGF0TWFwKCh7IHJvbWFqaXMsIGhpcmFnYW5hLCBjYW5HZW1pbmF0ZSB9KSA9PlxuICByb21hamlzXG4gICAgLm1hcCgoZSkgPT4gY29udmVydFN0cmluZ1RvS2V5cyhlKSlcbiAgICAuZmlsdGVyKChlKTogZSBpcyBLZXlbXSA9PiAhIWUpXG4gICAgLm1hcCgoZSkgPT4gbmV3IENob3JkKGUpKVxuICAgIC5mbGF0TWFwKChjaG9yZCkgPT4ge1xuICAgICAgaWYgKGNhbkdlbWluYXRlKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgeyBjaG9yZCwgaGlyYWdhbmEgfSxcbiAgICAgICAgICB7IGNob3JkOiBjaG9yZC53aXRoKFwic3BhY2VcIiksIGhpcmFnYW5hOiBcIlx1MzA2M1wiICsgaGlyYWdhbmEgfSxcbiAgICAgICAgXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbeyBjaG9yZCwgaGlyYWdhbmEgfV07XG4gICAgICB9XG4gICAgfSlcbik7XG5cbmV4cG9ydCBjbGFzcyBIaXJhZ2FuYUNob3JkTWFwIGltcGxlbWVudHMgQ2hvcmRNYXAge1xuICBtYXAoY2hvcmQ6IENob3JkKSB7XG4gICAgY29uc3QgbWFwcGluZyA9IGZpbmRNYXBwaW5nKGNob3JkKTtcbiAgICBpZiAoIW1hcHBpbmcpIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cblxuICAgIHJldHVybiBtYXBwaW5nLmhpcmFnYW5hO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRNYXBwaW5nKGNob3JkOiBDaG9yZCkge1xuICByZXR1cm4gbWFwcGluZ3MuZmluZCgoZSkgPT4gZS5jaG9yZC5lcXVhbHMoY2hvcmQpKTtcbn1cbiIsICJpbXBvcnQgeyBDaG9yZCB9IGZyb20gXCIuL0Nob3JkXCI7XG5pbXBvcnQgeyBDaG9yZE1hcCB9IGZyb20gXCIuL0Nob3JkTWFwXCI7XG5pbXBvcnQgeyBIaXJhZ2FuYUNob3JkTWFwIH0gZnJvbSBcIi4vSGlyYWdhbmFDaG9yZE1hcFwiO1xuXG5jb25zdCBoaXJhZ2FuYUNob3JkTWFwID0gbmV3IEhpcmFnYW5hQ2hvcmRNYXAoKTtcblxuZXhwb3J0IGNsYXNzIEthdGFrYW5hQ2hvcmRNYXAgaW1wbGVtZW50cyBDaG9yZE1hcCB7XG4gIG1hcChjaG9yZDogQ2hvcmQpIHtcbiAgICByZXR1cm4gY29udmVydEhpcmFnYW5hVG9LYXRha2FuYShoaXJhZ2FuYUNob3JkTWFwLm1hcChjaG9yZCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRIaXJhZ2FuYVRvS2F0YWthbmEoaGlyYWdhbmE6IHN0cmluZykge1xuICByZXR1cm4gWy4uLmhpcmFnYW5hXVxuICAgIC5tYXAoKGUpID0+IHtcbiAgICAgIGNvbnN0IGNvZGVQb2ludCA9IGUuY29kZVBvaW50QXQoMCkgPz8gMDtcbiAgICAgIGlmICgweDMwNDEgPD0gY29kZVBvaW50ICYmIGNvZGVQb2ludCA8PSAweDMwOTYpIHtcbiAgICAgICAgcmV0dXJuIGNvZGVQb2ludCArIDB4NjA7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29kZVBvaW50O1xuICAgIH0pXG4gICAgLm1hcCgoZSkgPT4gU3RyaW5nLmZyb21Db2RlUG9pbnQoZSkpXG4gICAgLmpvaW4oXCJcIik7XG59XG4iLCAiaW1wb3J0IHsgS2V5TG9nIH0gZnJvbSBcIi4vS2V5TG9nXCI7XG5cbmV4cG9ydCBjbGFzcyBLZXlMb2dnZXIge1xuICByZWFkb25seSBsb2dzOiBLZXlMb2dbXSA9IFtdO1xuXG4gIGxvZyhsb2c6IEtleUxvZykge1xuICAgIHRoaXMubG9ncy5wdXNoKGxvZyk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IgfSBmcm9tIFwiLi9jb250cm9sbGVyL0VkaXRvclwiO1xuaW1wb3J0IHsgTG9nRXhwb3J0ZXIgfSBmcm9tIFwiLi9jb250cm9sbGVyL0xvZ0V4cG9ydGVyXCI7XG5pbXBvcnQgeyBDaG9yZGVyIH0gZnJvbSBcIi4vZG9tYWluL2Nob3JkL0Nob3JkZXJcIjtcbmltcG9ydCB7IEhpcmFnYW5hQ2hvcmRNYXAgfSBmcm9tIFwiLi9kb21haW4vY2hvcmQvSGlyYWdhbmFDaG9yZE1hcFwiO1xuaW1wb3J0IHsgS2F0YWthbmFDaG9yZE1hcCB9IGZyb20gXCIuL2RvbWFpbi9jaG9yZC9LYXRha2FuYUNob3JkTWFwXCI7XG5pbXBvcnQgeyBLZXlMb2dnZXIgfSBmcm9tIFwiLi9kb21haW4va2V5L0tleUxvZ2dlclwiO1xuXG5mdW5jdGlvbiBtYWluKCkge1xuICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdG9yXCIpO1xuICBjb25zdCBtb2RlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RlXCIpO1xuICBjb25zdCBleHBvcnRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2V4cG9ydFwiKTtcbiAgaWYgKFxuICAgICEoXG4gICAgICB0ZXh0YXJlYSBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQgJiZcbiAgICAgIG1vZGVCdXR0b24gaW5zdGFuY2VvZiBIVE1MQnV0dG9uRWxlbWVudCAmJlxuICAgICAgZXhwb3J0QnV0dG9uIGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnRcbiAgICApXG4gICkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGtleUxvZ2dlciA9IG5ldyBLZXlMb2dnZXIoKTtcbiAgbmV3IEVkaXRvcihcbiAgICB0ZXh0YXJlYSxcbiAgICBtb2RlQnV0dG9uLFxuICAgIG5ldyBDaG9yZGVyKG5ldyBIaXJhZ2FuYUNob3JkTWFwKCkpLFxuICAgIG5ldyBDaG9yZGVyKG5ldyBLYXRha2FuYUNob3JkTWFwKCkpLFxuICAgIGtleUxvZ2dlclxuICApO1xuICBuZXcgTG9nRXhwb3J0ZXIoZXhwb3J0QnV0dG9uLCBrZXlMb2dnZXIsIG5ldyBEYXRlKCkpO1xu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LElBQUlDLENBQWtCLEVBQ2xDLElBQUlELEVBQVEsSUFBSUUsQ0FBa0IsRUFDbENMLENBQ0YsRUFDQSxJQUFJTSxFQUFZUCxFQUFjQyxFQUFXLElBQUksSUFBTSxDQUNyRCxDQUVBSixFQUFLIiwKICAibmFtZXMiOiBbImNvbnZlcnRDaGFyVG9LZXkiLCAiY2hhciIsICJjb252ZXJ0U3RyaW5nVG9LZXlzIiwgInN0cmluZyIsICJrZXlzIiwgImtleSIsICJFZGl0b3IiLCAidGV4dGFyZWEiLCAiYnV0dG9uIiwgImhpcmFnYW5hQ2hvcmRlciIsICJrYXRha2FuYUNob3JkZXIiLCAia2V5TG9nZ2VyIiwgImUiLCAiZXZlbnQiLCAia2V5IiwgImNvbnZlcnRLZXlib2FyZEV2ZW50VG9LZXkiLCAiaGlyYWdhbmEiLCAia2F0YWthbmEiLCAidGV4dCIsICJzZWxlY3Rpb25TdGFydCIsICJzZWxlY3Rpb25FbmQiLCAic2VsZWN0aW9uUG9zaXRpb24iLCAibW9kZSIsICJjb252ZXJ0TW9kZVRvU3ltYm9sIiwgImNvbnZlcnRDaGFyVG9LZXkiLCAiTG9nRXhwb3J0ZXIiLCAiZXhwb3J0QnV0dG9uIiwgImtleUxvZ2dlciIsICJhcHBTdGFydFRpbWUiLCAic3RyIiwgImxvZyIsICJDaG9yZCIsICJrZXlzIiwgImRlZHVwZSIsICJjaG9yZCIsICJrZXkiLCAicmVzdWx0IiwgIkNob3JkZXIiLCAibWFwIiwgImtleSIsICJfIiwgInN0YXRlIiwgImNob3JkIiwgImNvbnZlcnRLZXlTdGF0ZXNUb0Nob3JkIiwgImtleVN0YXRlcyIsICJDaG9yZCIsICJtYXBwaW5ncyIsICJIaXJhZ2FuYUNob3JkTWFwX2RlZmF1bHQiLCAicm9tYWppcyIsICJoaXJhZ2FuYSIsICJjYW5HZW1pbmF0ZSIsICJlIiwgImNvbnZlcnRTdHJpbmdUb0tleXMiLCAiQ2hvcmQiLCAiY2hvcmQiLCAiSGlyYWdhbmFDaG9yZE1hcCIsICJtYXBwaW5nIiwgImZpbmRNYXBwaW5nIiwgImhpcmFnYW5hQ2hvcmRNYXAiLCAiSGlyYWdhbmFDaG9yZE1hcCIsICJLYXRha2FuYUNob3JkTWFwIiwgImNob3JkIiwgImNvbnZlcnRIaXJhZ2FuYVRvS2F0YWthbmEiLCAiaGlyYWdhbmEiLCAiZSIsICJfYSIsICJjb2RlUG9pbnQiLCAiS2V5TG9nZ2VyIiwgImxvZyIsICJtYWluIiwgInRleHRhcmVhIiwgIm1vZGVCdXR0b24iLCAiZXhwb3J0QnV0dG9uIiwgImtleUxvZ2dlciIsICJLZXlMb2dnZXIiLCAiRWRpdG9yIiwgIkNob3JkZXIiLCAiSGlyYWdhbmFDaG9yZE1hcCIsICJLYXRha2FuYUNob3JkTWFwIiwgIkxvZ0V4cG9ydGVyIl0KfQo=
